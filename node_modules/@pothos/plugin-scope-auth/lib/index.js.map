{"version":3,"sources":["../src/index.ts"],"names":["PothosScopeAuthPlugin","RequestCache","pluginName","inResolveType","BasePlugin","wrapResolve","resolver","fieldConfig","options","disableScopeAuth","typeConfig","buildCache","getTypeConfig","parentType","graphqlKind","PothosSchemaError","authorizedOnSubscribe","builder","scopeAuthOptions","authorizeOnSubscribe","kind","nonRoot","runTypeScopesOnField","pothosOptions","runScopesOnType","steps","createResolveSteps","length","resolveHelper","wrapSubscribe","subscriber","createSubscribeSteps","wrapResolveType","resolveType","args","wrapIsTypeOf","isTypeOf","shouldRunTypeScopes","createStepsForType","forField","runSteps","isTypeOfHelper","source","context","info","skipTypeScopes","skipInterfaceScopes","parentAuthScope","authScopes","parentGrantScopes","grantScopes","interfaceConfigs","interfaces","map","iface","push","createTypeAuthScopesStep","name","forEach","interfaceConfig","createTypeGrantScopesStep","stepsForType","fieldAuthScopes","fieldGrantScopes","createFieldAuthScopesStep","createResolveStep","createFieldGrantScopesStep","fieldBuilderProto","RootFieldBuilder","prototype","authField","field","SchemaBuilder","registerPlugin"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":"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"}